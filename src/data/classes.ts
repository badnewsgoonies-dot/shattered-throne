import {
  ClassDefinition,
  GrowthRates,
  MovementType,
  StatCaps,
  Stats,
  UnitClassName,
  WeaponType,
} from '../shared/types';

function makeStats(
  hp: number,
  strength: number,
  magic: number,
  skill: number,
  speed: number,
  luck: number,
  defense: number,
  resistance: number,
  movement: number,
): Stats {
  return { hp, strength, magic, skill, speed, luck, defense, resistance, movement };
}

function makeGrowth(
  hp: number,
  strength: number,
  magic: number,
  skill: number,
  speed: number,
  luck: number,
  defense: number,
  resistance: number,
): GrowthRates {
  return { hp, strength, magic, skill, speed, luck, defense, resistance };
}

function makeCaps(
  hp: number,
  strength: number,
  magic: number,
  skill: number,
  speed: number,
  luck: number,
  defense: number,
  resistance: number,
  movement: number,
): StatCaps {
  return { hp, strength, magic, skill, speed, luck, defense, resistance, movement };
}

export const CLASS_DEFINITIONS: Record<UnitClassName, ClassDefinition> = {
  [UnitClassName.Warrior]: {
    name: UnitClassName.Warrior,
    displayName: 'Warrior',
    baseStats: makeStats(20, 7, 0, 5, 5, 3, 6, 1, 5),
    growthRates: makeGrowth(80, 60, 5, 50, 45, 40, 55, 25),
    statCaps: makeCaps(52, 28, 12, 25, 24, 26, 27, 18, 7),
    movementType: MovementType.Foot,
    weaponTypes: [WeaponType.Sword, WeaponType.Axe],
    skills: [
      { level: 1, skillId: 'power-strike' },
      { level: 10, skillId: 'wrath' },
    ],
    promotionOptions: [UnitClassName.Berserker, UnitClassName.General],
    promotionBonuses: {},
    isPromoted: false,
  },
  [UnitClassName.Knight]: {
    name: UnitClassName.Knight,
    displayName: 'Knight',
    baseStats: makeStats(18, 6, 0, 5, 7, 4, 5, 1, 7),
    growthRates: makeGrowth(75, 55, 10, 50, 55, 45, 45, 25),
    statCaps: makeCaps(48, 26, 14, 24, 27, 25, 24, 18, 9),
    movementType: MovementType.Mounted,
    weaponTypes: [WeaponType.Lance],
    skills: [
      { level: 1, skillId: 'shelter' },
      { level: 10, skillId: 'steadfast' },
    ],
    promotionOptions: [UnitClassName.Paladin, UnitClassName.GreatKnight],
    promotionBonuses: {},
    isPromoted: false,
  },
  [UnitClassName.Archer]: {
    name: UnitClassName.Archer,
    displayName: 'Archer',
    baseStats: makeStats(17, 5, 0, 7, 6, 4, 3, 2, 5),
    growthRates: makeGrowth(70, 50, 10, 65, 55, 50, 35, 30),
    statCaps: makeCaps(45, 24, 16, 30, 28, 28, 21, 20, 7),
    movementType: MovementType.Foot,
    weaponTypes: [WeaponType.Bow],
    skills: [
      { level: 1, skillId: 'precision-shot' },
      { level: 10, skillId: 'hawkeye' },
    ],
    promotionOptions: [UnitClassName.Sniper, UnitClassName.Ranger],
    promotionBonuses: {},
    isPromoted: false,
  },
  [UnitClassName.Mage]: {
    name: UnitClassName.Mage,
    displayName: 'Mage',
    baseStats: makeStats(16, 0, 7, 5, 5, 4, 2, 6, 5),
    growthRates: makeGrowth(65, 10, 65, 50, 50, 45, 20, 50),
    statCaps: makeCaps(42, 14, 30, 26, 25, 27, 18, 30, 7),
    movementType: MovementType.Foot,
    weaponTypes: [WeaponType.FireTome, WeaponType.WindTome, WeaponType.ThunderTome],
    skills: [
      { level: 1, skillId: 'fireball' },
      { level: 10, skillId: 'focus-magic' },
    ],
    promotionOptions: [UnitClassName.Sage, UnitClassName.DarkKnight],
    promotionBonuses: {},
    isPromoted: false,
  },
  [UnitClassName.Cleric]: {
    name: UnitClassName.Cleric,
    displayName: 'Cleric',
    baseStats: makeStats(16, 0, 5, 4, 5, 6, 2, 7, 5),
    growthRates: makeGrowth(60, 5, 55, 45, 50, 60, 20, 60),
    statCaps: makeCaps(43, 12, 28, 24, 25, 30, 18, 32, 7),
    movementType: MovementType.Foot,
    weaponTypes: [WeaponType.Staff],
    skills: [
      { level: 1, skillId: 'heal' },
      { level: 10, skillId: 'renewal' },
    ],
    promotionOptions: [UnitClassName.Bishop, UnitClassName.Valkyrie],
    promotionBonuses: {},
    isPromoted: false,
  },
  [UnitClassName.Thief]: {
    name: UnitClassName.Thief,
    displayName: 'Thief',
    baseStats: makeStats(17, 4, 0, 8, 9, 7, 3, 2, 6),
    growthRates: makeGrowth(65, 45, 10, 70, 75, 60, 30, 30),
    statCaps: makeCaps(44, 22, 14, 31, 33, 32, 20, 19, 8),
    movementType: MovementType.Foot,
    weaponTypes: [WeaponType.Sword],
    skills: [
      { level: 1, skillId: 'steal-step' },
      { level: 10, skillId: 'locktouch' },
    ],
    promotionOptions: [UnitClassName.Assassin, UnitClassName.Trickster],
    promotionBonuses: {},
    isPromoted: false,
  },
  [UnitClassName.Berserker]: {
    name: UnitClassName.Berserker,
    displayName: 'Berserker',
    baseStats: makeStats(28, 12, 0, 9, 10, 5, 9, 3, 6),
    growthRates: makeGrowth(78, 76, 50, 62, 64, 52, 58, 50),
    statCaps: makeCaps(60, 36, 30, 34, 34, 32, 32, 30, 8),
    movementType: MovementType.Foot,
    weaponTypes: [WeaponType.Axe, WeaponType.Sword],
    skills: [
      { level: 1, skillId: 'power-strike' },
      { level: 5, skillId: 'wrath' },
      { level: 15, skillId: 'counter' },
    ],
    promotionOptions: [],
    promotionBonuses: { hp: 4, strength: 4, speed: 2, defense: 2 },
    isPromoted: true,
  },
  [UnitClassName.Paladin]: {
    name: UnitClassName.Paladin,
    displayName: 'Paladin',
    baseStats: makeStats(26, 10, 2, 9, 9, 8, 9, 6, 8),
    growthRates: makeGrowth(70, 62, 50, 62, 60, 56, 60, 54),
    statCaps: makeCaps(56, 32, 30, 34, 33, 34, 33, 31, 10),
    movementType: MovementType.Mounted,
    weaponTypes: [WeaponType.Sword, WeaponType.Lance],
    skills: [
      { level: 1, skillId: 'lance-discipline' },
      { level: 8, skillId: 'canto' },
      { level: 16, skillId: 'aegis' },
    ],
    promotionOptions: [],
    promotionBonuses: { hp: 3, strength: 3, defense: 2, movement: 1 },
    isPromoted: true,
  },
  [UnitClassName.Assassin]: {
    name: UnitClassName.Assassin,
    displayName: 'Assassin',
    baseStats: makeStats(24, 9, 2, 13, 14, 10, 7, 5, 7),
    growthRates: makeGrowth(62, 60, 50, 74, 76, 64, 52, 50),
    statCaps: makeCaps(52, 31, 30, 38, 40, 36, 30, 30, 9),
    movementType: MovementType.Foot,
    weaponTypes: [WeaponType.Sword],
    skills: [
      { level: 1, skillId: 'desperation' },
      { level: 8, skillId: 'shadowstep' },
      { level: 16, skillId: 'lethality' },
    ],
    promotionOptions: [],
    promotionBonuses: { strength: 3, skill: 4, speed: 4, defense: 2 },
    isPromoted: true,
  },
  [UnitClassName.Sage]: {
    name: UnitClassName.Sage,
    displayName: 'Sage',
    baseStats: makeStats(23, 2, 12, 10, 10, 9, 5, 10, 6),
    growthRates: makeGrowth(60, 50, 78, 66, 62, 56, 50, 70),
    statCaps: makeCaps(50, 30, 40, 36, 34, 34, 30, 38, 8),
    movementType: MovementType.Foot,
    weaponTypes: [WeaponType.FireTome, WeaponType.WindTome, WeaponType.ThunderTome, WeaponType.LightTome, WeaponType.Staff],
    skills: [
      { level: 1, skillId: 'arcane-mastery' },
      { level: 8, skillId: 'rally-magic' },
      { level: 16, skillId: 'luna-strike' },
    ],
    promotionOptions: [],
    promotionBonuses: { magic: 4, skill: 2, resistance: 3, hp: 2 },
    isPromoted: true,
  },
  [UnitClassName.General]: {
    name: UnitClassName.General,
    displayName: 'General',
    baseStats: makeStats(30, 11, 0, 8, 7, 6, 13, 5, 5),
    growthRates: makeGrowth(76, 66, 50, 56, 50, 50, 78, 56),
    statCaps: makeCaps(60, 34, 30, 33, 30, 32, 40, 32, 7),
    movementType: MovementType.Armored,
    weaponTypes: [WeaponType.Lance, WeaponType.Axe],
    skills: [
      { level: 1, skillId: 'fortress' },
      { level: 8, skillId: 'pavise' },
      { level: 16, skillId: 'counter' },
    ],
    promotionOptions: [],
    promotionBonuses: { hp: 4, defense: 4, strength: 2, resistance: 2 },
    isPromoted: true,
  },
  [UnitClassName.Dancer]: {
    name: UnitClassName.Dancer,
    displayName: 'Dancer',
    baseStats: makeStats(22, 3, 4, 9, 12, 12, 5, 8, 6),
    growthRates: makeGrowth(62, 50, 56, 62, 76, 74, 50, 62),
    statCaps: makeCaps(48, 30, 32, 35, 38, 40, 30, 34, 8),
    movementType: MovementType.Foot,
    weaponTypes: [WeaponType.Sword, WeaponType.Staff],
    skills: [
      { level: 1, skillId: 'dance' },
      { level: 8, skillId: 'inspiration' },
      { level: 16, skillId: 'graceful-step' },
    ],
    promotionOptions: [],
    promotionBonuses: { speed: 3, luck: 4, resistance: 2, movement: 1 },
    isPromoted: true,
  },
  [UnitClassName.Sniper]: {
    name: UnitClassName.Sniper,
    displayName: 'Sniper',
    baseStats: makeStats(24, 10, 0, 14, 12, 9, 8, 6, 6),
    growthRates: makeGrowth(64, 62, 50, 78, 66, 58, 52, 50),
    statCaps: makeCaps(52, 32, 30, 40, 36, 34, 31, 30, 8),
    movementType: MovementType.Foot,
    weaponTypes: [WeaponType.Bow],
    skills: [
      { level: 1, skillId: 'deadeye' },
      { level: 8, skillId: 'hawkeye' },
      { level: 16, skillId: 'quick-draw' },
    ],
    promotionOptions: [],
    promotionBonuses: { strength: 3, skill: 4, speed: 2, defense: 2 },
    isPromoted: true,
  },
  [UnitClassName.Ranger]: {
    name: UnitClassName.Ranger,
    displayName: 'Ranger',
    baseStats: makeStats(25, 10, 1, 12, 12, 9, 8, 7, 8),
    growthRates: makeGrowth(66, 64, 50, 70, 68, 60, 56, 52),
    statCaps: makeCaps(54, 33, 30, 37, 37, 35, 32, 31, 10),
    movementType: MovementType.Mounted,
    weaponTypes: [WeaponType.Sword, WeaponType.Bow],
    skills: [
      { level: 1, skillId: 'mounted-archery' },
      { level: 8, skillId: 'vantage' },
      { level: 16, skillId: 'pass' },
    ],
    promotionOptions: [],
    promotionBonuses: { hp: 3, strength: 2, speed: 3, movement: 1 },
    isPromoted: true,
  },
  [UnitClassName.DarkKnight]: {
    name: UnitClassName.DarkKnight,
    displayName: 'Dark Knight',
    baseStats: makeStats(27, 8, 10, 9, 9, 7, 9, 9, 8),
    growthRates: makeGrowth(72, 58, 74, 60, 60, 52, 60, 64),
    statCaps: makeCaps(56, 32, 38, 34, 34, 33, 34, 35, 10),
    movementType: MovementType.Mounted,
    weaponTypes: [WeaponType.Sword, WeaponType.DarkTome, WeaponType.FireTome],
    skills: [
      { level: 1, skillId: 'dark-aura' },
      { level: 8, skillId: 'ignis' },
      { level: 16, skillId: 'lifetaker' },
    ],
    promotionOptions: [],
    promotionBonuses: { hp: 3, magic: 4, defense: 2, resistance: 2 },
    isPromoted: true,
  },
  [UnitClassName.Bishop]: {
    name: UnitClassName.Bishop,
    displayName: 'Bishop',
    baseStats: makeStats(24, 1, 11, 9, 8, 11, 6, 12, 6),
    growthRates: makeGrowth(62, 50, 72, 58, 54, 70, 50, 78),
    statCaps: makeCaps(50, 30, 38, 34, 32, 38, 30, 40, 8),
    movementType: MovementType.Foot,
    weaponTypes: [WeaponType.Staff, WeaponType.LightTome],
    skills: [
      { level: 1, skillId: 'restore' },
      { level: 8, skillId: 'holy-ward' },
      { level: 16, skillId: 'miracle' },
    ],
    promotionOptions: [],
    promotionBonuses: { magic: 3, resistance: 4, hp: 2, defense: 2 },
    isPromoted: true,
  },
  [UnitClassName.Valkyrie]: {
    name: UnitClassName.Valkyrie,
    displayName: 'Valkyrie',
    baseStats: makeStats(25, 3, 10, 10, 11, 12, 7, 11, 8),
    growthRates: makeGrowth(64, 50, 70, 60, 68, 70, 52, 72),
    statCaps: makeCaps(52, 30, 37, 35, 37, 39, 31, 39, 10),
    movementType: MovementType.Mounted,
    weaponTypes: [WeaponType.Staff, WeaponType.LightTome, WeaponType.WindTome],
    skills: [
      { level: 1, skillId: 'rescue' },
      { level: 8, skillId: 'rally-speed' },
      { level: 16, skillId: 'holy-ward' },
    ],
    promotionOptions: [],
    promotionBonuses: { magic: 3, speed: 3, resistance: 3, movement: 1 },
    isPromoted: true,
  },
  [UnitClassName.Trickster]: {
    name: UnitClassName.Trickster,
    displayName: 'Trickster',
    baseStats: makeStats(23, 8, 6, 12, 13, 11, 7, 8, 7),
    growthRates: makeGrowth(60, 58, 60, 72, 74, 68, 50, 60),
    statCaps: makeCaps(50, 31, 34, 38, 39, 37, 30, 33, 9),
    movementType: MovementType.Foot,
    weaponTypes: [WeaponType.Sword, WeaponType.Staff],
    skills: [
      { level: 1, skillId: 'hex' },
      { level: 8, skillId: 'steal-step' },
      { level: 16, skillId: 'lucky-seven' },
    ],
    promotionOptions: [],
    promotionBonuses: { skill: 3, speed: 4, luck: 2, magic: 2 },
    isPromoted: true,
  },
  [UnitClassName.GreatKnight]: {
    name: UnitClassName.GreatKnight,
    displayName: 'Great Knight',
    baseStats: makeStats(29, 11, 1, 9, 8, 8, 12, 7, 7),
    growthRates: makeGrowth(74, 68, 50, 58, 54, 54, 74, 58),
    statCaps: makeCaps(58, 35, 30, 34, 32, 33, 38, 33, 9),
    movementType: MovementType.Armored,
    weaponTypes: [WeaponType.Sword, WeaponType.Lance, WeaponType.Axe],
    skills: [
      { level: 1, skillId: 'shelter' },
      { level: 8, skillId: 'warding-blow' },
      { level: 16, skillId: 'aegis' },
    ],
    promotionOptions: [],
    promotionBonuses: { hp: 4, strength: 3, defense: 4, movement: 1 },
    isPromoted: true,
  },
};

export function getClassDefinition(className: UnitClassName): ClassDefinition {
  return CLASS_DEFINITIONS[className];
}

export function getAllClassDefinitions(): ClassDefinition[] {
  return Object.values(CLASS_DEFINITIONS);
}
